<!DOCTYPE html><html class="appearance-auto" lang="zh-CN"><head><meta charset="UTF-8"><title>MAC版MAMP环境下为PHP7.x安装redis扩展</title><meta name="description" content="~ ~ ~"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="1.依赖安装 Homebrew（Mac 电脑中已安装了 Homebrew 包管理器的可忽略此步）如果你的 MAC 电脑未安装有 Homebrew——一个包管理器，需要先安装 Homebrew 包管理器，后面步骤中的 ./configure 命令和安装 redis 服务端的命令等需要 brew 为其安装组件。 打开 terminal，安装 Homebrew：
/usr/bin/ruby -e “$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)
脚本在执行过程中会有多次暂停，并说明将它将做什么；同时也会边执行、边需要联网下载资源，下载速度不会很快（因为是国内网络访问国外站点资源），请耐心等待安装完成。 .."><meta name="generator" content="Hexo 5.4.0"></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Conor.Jin's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">MAC版MAMP环境下为PHP7.x安装redis扩展</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">点击返回顶部</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%BE%9D%E8%B5%96%E5%AE%89%E8%A3%85-Homebrew"><span class="toc-text">1.依赖安装 Homebrew</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BE%9D%E8%B5%96%E5%AE%89%E8%A3%85-configure"><span class="toc-text">2.依赖安装 configure</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E4%B8%8B%E8%BD%BD-php-redis-%E6%89%A9%E5%B1%95%E7%BB%84%E4%BB%B6%E7%9A%84%E5%AE%89%E8%A3%85%E5%8C%85"><span class="toc-text">3.下载 php-redis 扩展组件的安装包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E4%BD%BF%E7%94%A8-phpize-%E5%91%BD%E4%BB%A4%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90-configure-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">4.使用 phpize 命令编译生成 configure 配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E9%85%8D%E7%BD%AE%E3%80%81%E7%BC%96%E8%AF%91%E5%B9%B6%E5%AE%89%E8%A3%85-phpredis"><span class="toc-text">5.配置、编译并安装 phpredis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E4%BF%AE%E6%94%B9-php-ini"><span class="toc-text">6.修改 php.ini</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-redis-%E7%BB%84%E4%BB%B6%E6%98%AF%E5%90%A6%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F"><span class="toc-text">7.redis 组件是否安装成功</span></a></li></ol></div><div class="column is-9"><header class="my-4"></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">MAC版MAMP环境下为PHP7.x安装redis扩展</h1><time class="has-text-grey" datetime="2018-11-17T05:38:36.000Z">2018-11-17</time><article class="mt-2 post-content"><h2 id="1-依赖安装-Homebrew"><a href="#1-依赖安装-Homebrew" class="headerlink" title="1.依赖安装 Homebrew"></a>1.依赖安装 Homebrew</h2><p>（Mac 电脑中已安装了 Homebrew 包管理器的可忽略此步）如果你的 MAC 电脑未安装有 Homebrew——一个包管理器，需要先安装 Homebrew 包管理器，后面步骤中的 ./configure 命令和安装 redis 服务端的命令等需要 brew 为其安装组件。 打开 terminal，安装 Homebrew：</p>
<p>/usr/bin/ruby -e “$(curl -fsSL <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/Homebrew/install/master/install">https://raw.githubusercontent.com/Homebrew/install/master/install</a>)</p>
<p>脚本在执行过程中会有多次暂停，并说明将它将做什么；同时也会边执行、边需要联网下载资源，下载速度不会很快（因为是国内网络访问国外站点资源），请耐心等待安装完成。  </p>
<h2 id="2-依赖安装-configure"><a href="#2-依赖安装-configure" class="headerlink" title="2.依赖安装 configure"></a>2.依赖安装 configure</h2><p>（Mac 电脑中已安装了 configure 配置组件的可忽略此步）使用 brew 命令安装 configure 配置组件。</p>
<p>brew install autoconf wget</p>
<p> </p>
<h2 id="3-下载-php-redis-扩展组件的安装包"><a href="#3-下载-php-redis-扩展组件的安装包" class="headerlink" title="3.下载 php-redis 扩展组件的安装包"></a>3.下载 php-redis 扩展组件的安装包</h2><p>在终端中使用 git clone 命令下载 php-redis 扩展组件的安装包</p>
<p>git clone <a target="_blank" rel="noopener" href="https://github.com/nicolasff/phpredis.git">https://github.com/nicolasff/phpredis.git</a></p>
<p>下载完成后系统会自动解压安装包文件。如果未自动解压，请手动解压或使用 unzip phpredis.zip 命令解压。 解压后使用 cd 命令进入 phpredis 目录：</p>
<p>cd phpredis/</p>
<p> </p>
<h2 id="4-使用-phpize-命令编译生成-configure-配置文件"><a href="#4-使用-phpize-命令编译生成-configure-配置文件" class="headerlink" title="4.使用 phpize 命令编译生成 configure 配置文件"></a>4.使用 phpize 命令编译生成 configure 配置文件</h2><p>phpize 命令： 此时终端显示的当前目录是 phpredis，在终端中执行以下命令：</p>
<p>/Applications/MAMP/bin/php/php7.2.1/bin/phpize –with-php-config=/Applications/MAMP/bin/php/php7.2.1/bin/php-config</p>
<p>如果出现此错误：</p>
<p>Cannot find autoconf. Please check your autoconf installation and the $PHP_AUTOCONF environment variable. Then, rerun this script.</p>
<p>则是因为此命令依赖 autoconf 工具，需要安装 autoconf 工具（参考第一步中的第2点）。 如果执行成功，会提示如下信息： <img src="https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=2260770349,1912336145&fm=173&app=25&f=JPEG?w=640&h=106">  </p>
<h2 id="5-配置、编译并安装-phpredis"><a href="#5-配置、编译并安装-phpredis" class="headerlink" title="5.配置、编译并安装 phpredis"></a>5.配置、编译并安装 phpredis</h2><p>配置 phpredis 命令。 此时终端显示的当前目录是 phpredis，在终端中执行以下命令</p>
<p>./configure –with-php-config=/Applications/MAMP/bin/php/php7.2.1/bin/php-config</p>
<p>如果执行出错，提示“未找到指定目录”之类的信息，也是因为此命令依赖 autoconf 工具，需要安装 autoconf 工具（参考第二步）。 如果执行成功，像这样： <img src="https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=2330634188,2198640965&fm=173&app=25&f=JPEG?w=640&h=427&s=ABE273235BBCB6C84ED5F50B0000E0C2"> 编译与安装 phpredis 命令（make 是编译，make install 是安装）</p>
<p>make &amp;&amp; make install</p>
<p>安装成功后，这时会在 phpredis/modules 目录下生成了 redis.so 文件。同时 redis.so 会自动复制到/Applications/MAMP/bin/php/php7.0.8/lib/php/extensions/no-debug-non-zts-20171025/ 目录下（extensions 后面带日期部分的那一级目录可能会与我的不一样，请以自己电脑上的为准）。如果该目录下不存在 redis.so，可手动将 phpredis/modules 目录下的 redis.so 复制过去。至此，phpredis 扩展已安装成功  </p>
<h2 id="6-修改-php-ini"><a href="#6-修改-php-ini" class="headerlink" title="6.修改 php.ini"></a>6.修改 php.ini</h2><p>建议在 MAMP Pro 软件中打开 php.ini 文件并修改，因为在终端中使用 vim 命令编辑 php.ini 文件或手动打开编辑 php.ini 文件保存后可能不会起作用，所以建议在 MAMP Pro 软件中打开 php.ini 文件并修改： <img src="https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=2448095372,2140049450&fm=173&app=25&f=JPEG?w=639&h=259&s=F5259A545A65310B861E8AC30300B0BF"> 在 php.ini 中搜索 “extension=”，在后面添加一行：”extension=redis.so”，保存后重启 MAMP。 <img src="https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=185617445,1884557620&fm=173&app=25&f=JPEG?w=598&h=503&s=4FC2ED1A110E454D4A69A5DB0000D0B3">  </p>
<h2 id="7-redis-组件是否安装成功"><a href="#7-redis-组件是否安装成功" class="headerlink" title="7.redis 组件是否安装成功"></a>7.redis 组件是否安装成功</h2><p>检测方案可以使用 php-m  也可以使用 phpinfo() 查看   注意：操作此步骤之前 必须将系统默认的php环境切换到MAMP中 参考：<a target="_blank" rel="noopener" href="https://baijiahao.baidu.com/s?id=1602787432736329481&amp;wfr=spider&amp;for=pc">https://baijiahao.baidu.com/s?id=1602787432736329481&amp;wfr=spider&amp;for=pc</a></p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2019/07/02/ubuntu18configurenginx/" title="ubuntu18 配置nginx服务器"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">上一页: ubuntu18 配置nginx服务器</span></a><a class="button is-default" href="/2018/11/17/macphpmamp/" title="切换Mac默认PHP版本为MAMP"><span class="has-text-weight-semibold">下一页: 切换Mac默认PHP版本为MAMP</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/Conor-Jin"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> Conor.Jin 2021</span></p></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>